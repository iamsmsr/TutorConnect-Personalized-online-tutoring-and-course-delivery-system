<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>TutorConnect</title>
  <link rel="stylesheet" href="css/index.css">
</head>
<body>
  <div id="healthLoadingOverlay" style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:rgba(255,255,255,0.95);z-index:9999;display:flex;flex-direction:column;align-items:center;justify-content:center;">
    <div style="display:flex;flex-direction:column;align-items:center;gap:18px;">
      <div class="loader" style="border:8px solid #eee;border-top:8px solid #667eea;border-radius:50%;width:64px;height:64px;animation:spin 1s linear infinite;"></div>
      <span style="color:#667eea;font-size:1.2rem;font-weight:600;">Starting TutorConnect backend... Please wait</span>
    </div>
  </div>
  <nav class="navbar">
    <div class="logo">TutorConnect</div>
    <input type="text" placeholder="What do you want to learn?" class="search-bar">
    <div class="navbar-buttons">
      <button class="register-btn">Register for free</button>
      <button class="login-btn">Log In</button>
      <button id="ragChatbotBtnIndex" class="ai-chatbot-btn" style="background:#667eea; color:#fff; border:none; border-radius:20px; padding:10px 22px; font-weight:600; margin-left:12px; cursor:pointer; display:flex; align-items:center; gap:8px;">
        <span style="font-size:1.3rem;">ðŸ¤–</span> AI Chatbot
      </button>
    </div>
  </nav>
  <header class="hero">
    <div class="hero-overlay">
      <h1>Learn anywhere with <span class="highlight">TutorConnect</span></h1>
      <p>Learn on-the-go or right at home with TutorConnect's self-paced courses. Get started today!</p>
      <div class="hero-search-group">
        <input type="text" placeholder="Search our courses..." class="hero-search">
      </div>
      <div id="searchResults"></div>
    </div>
  </header>
  <!-- University logo section removed -->
  <section class="trending">
    <h2>Trending on TutorConnect</h2>
    <div class="courses">
      <div class="course-card">
        <img src="https://thfvnext.bing.com/th/id/OIP.pu762IWiEpRx8pTzBvZGaAHaHa?w=151&h=180&c=7&r=0&o=7&cb=thfvnext&dpr=1.3&pid=1.7&rm=3" alt="AI Course">
        <h3>Artificial Intelligence Programme</h3>
        <p>TutorConnect</p>
      </div>
      <div class="course-card">
        <img src="https://thfvnext.bing.com/th/id/OIP.pu762IWiEpRx8pTzBvZGaAHaHa?w=151&h=180&c=7&r=0&o=7&cb=thfvnext&dpr=1.3&pid=1.7&rm=3" alt="MBA Course">
        <h3>MBA Essentials</h3>
        <p>TutorConnect</p>
      </div>
      <div class="course-card">
        <img src="https://thfvnext.bing.com/th/id/OIP.pu762IWiEpRx8pTzBvZGaAHaHa?w=151&h=180&c=7&r=0&o=7&cb=thfvnext&dpr=1.3&pid=1.7&rm=3" alt="MIT AI">
        <h3>AI for Business Strategy</h3>
        <p>TutorConnect</p>
      </div>
    </div>
  </section>
  <!-- RAG Chatbot Modal -->
  <div id="ragChatbotModalIndex" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.7); z-index:2000; justify-content:center; align-items:center;">
    <div style="background:#fff; border-radius:12px; box-shadow:0 4px 32px rgba(0,0,0,0.2); width:90vw; max-width:600px; height:80vh; display:flex; flex-direction:column;">
      <div style="display:flex; justify-content:space-between; align-items:center; padding:12px 18px; background:#667eea; color:#fff; border-top-left-radius:12px; border-top-right-radius:12px;">
        <span style="font-size:1.2rem; font-weight:600;">TutorConnect AI Chatbot</span>
        <button id="closeRagChatbotModalIndex" style="background:none; border:none; color:#fff; font-size:1.5rem; cursor:pointer;">&times;</button>
      </div>
      <div id="ragChatbotLoadingIndex" style="flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:16px;">
        <div class="loader" style="border:6px solid #eee; border-top:6px solid #667eea; border-radius:50%; width:48px; height:48px; animation: spin 1s linear infinite;"></div>
        <span style="color:#667eea; font-weight:500;">Starting AI Chatbot... Please wait</span>
      </div>
      <iframe id="ragChatbotIframeIndex" src="https://tutorconnect-ragchatbot.onrender.com" style="flex:1; border:none; width:100%; height:100%; border-bottom-left-radius:12px; border-bottom-right-radius:12px; display:none;"></iframe>
    </div>
  </div>
  <style>
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
  <script src="js/config.js"></script>
  <script src="js/index.js"></script>
  <script src="js/show_username.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('ragChatbotBtnIndex').addEventListener('click', function() {
        const modal = document.getElementById('ragChatbotModalIndex');
        const loading = document.getElementById('ragChatbotLoadingIndex');
        const iframe = document.getElementById('ragChatbotIframeIndex');
        modal.style.display = 'flex';
        loading.style.display = 'flex';
        iframe.style.display = 'none';
        if (document.getElementById('ragChatbotErrorIndex')) {
          document.getElementById('ragChatbotErrorIndex').remove();
        }
        iframe.onload = function() {
          loading.style.display = 'none';
          iframe.style.display = 'block';
        };
        iframe.onerror = function() {
          loading.style.display = 'none';
          iframe.style.display = 'none';
          if (!document.getElementById('ragChatbotErrorIndex')) {
            const errorMsg = document.createElement('div');
            errorMsg.id = 'ragChatbotErrorIndex';
            errorMsg.style = 'color:#c00; text-align:center; padding:24px; font-weight:600;';
            errorMsg.textContent = 'Failed to load AI Chatbot. Please try again later.';
            loading.parentNode.appendChild(errorMsg);
          }
        };
        iframe.src = 'https://tutorconnect-ragchatbot.onrender.com';
      });
      document.getElementById('closeRagChatbotModalIndex').addEventListener('click', function() {
        document.getElementById('ragChatbotModalIndex').style.display = 'none';
        const iframe = document.getElementById('ragChatbotIframeIndex');
        iframe.src = '';
      });
    });
  </script>
</body>
</html>